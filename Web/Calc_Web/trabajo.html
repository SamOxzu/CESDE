<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trabajo en JS</title>
</head>
<body>
    <span id="message"></span>
    <script>
        // Diseñar una página de HTML con JS Avanzado que realice lo siguiente (crear y ejecutar):
        
        /* 1. Un arreglo de objetos con los datos de empleados, así: Identificacion, nombre, apellido,cargo y 
        salario. Agregar 10 objetos */
        let empleados = [
            {identificacion:"1",nombre:"Samuel",apellido:"Gutiérrez",cargo:"Desarrollador de Software",salario:"1700000"},
            {identificacion:"2",nombre:"Juliana",apellido:"Ceballos",cargo:"Servicios Generales",salario:"1000000"},
            {identificacion:"3",nombre:"Camila",apellido:"Acevedo",cargo:"Psicóloga",salario:"1300000"},
            {identificacion:"4",nombre:"José David",apellido:"Caicedo",cargo:"Vendedor",salario:"1100000"},
            {identificacion:"5",nombre:"Maria",apellido:"Valencia",cargo:"Diseñadora",salario:"1400000"},
            {identificacion:"6",nombre:"Gloria",apellido:"Ibargüen",cargo:"Desarrollador de Software",salario:"930000"},
            {identificacion:"7",nombre:"Clara",apellido:"Osorio",cargo:"Contabilidad",salario:"1500000"},
            {identificacion:"8",nombre:"Jimena",apellido:"Acevedo",cargo:"Ingeniera",salario:"1600000"},
            {identificacion:"9",nombre:"Melissa",apellido:"Jimenez",cargo:"Docencia",salario:"1250000"},
            {identificacion:"10",nombre:"Valentina",apellido:"Mosquera",cargo:"Administradora",salario:"1800000"}
        ]


        /* 2. Una promesa (que simule programación asíncrona) que permita mostrar, en una tabla, los 
        empleados cuyo cargo sea Desarrollador de Software y una columna calculada muestre el 10 por 
        ciento de cada salario. Se debe emitir un mensaje: Cargando los empleados… espere, por favor.
        Sino los encuentra que muestre mensaje que así lo indique */
        
        /*function buscar() {
            return new Promise((resolve, reject)=>{
                
            })    
        }

        buscar()
            .then((data)=>{
                setTimeout(() => {
                   let encontro = false;
                   let pos = 0;
                   let html = `<table border="1">
                                    <th>Identificación</th>
                                    <th>Nombre</th>
                                    <th>Apellido</th>
                                    <th>Cargo</th>
                                    <th>Salario</th>
                                    <th>10% Salario</th>
                                `
                    for (let i = 0; i < empleados.length; i++) {
                        if ("Desarrollador de Software" == empleados[i].cargo) {
                            pos = i;
                        }
                        encontro = true;
                            html += ` <tr>
                                        <td>${data[i].identif} </td>
                                        <td>${data[i].nombre} </td>
                                        <td>${data[i].apellido} </td>
                                    </tr>
                            `
                    }
                    html += `</table>`
                    document.getElementById('mensaje').innerHTML = ""
                },2000);
                document.getElementById('mensaje').innerHTML = "Espere por favor, buscando empleado"
            }
            
            )*/
         function buscar() {
            return new Promise((resolve, reject)=>{
                let html = `<table border="1">
                                    <th>Identificación</th>
                                    <th>Nombre</th>
                                    <th>Apellido</th>
                                    <th>Cargo</th>
                                    <th>Salario</th>
                                    <th>10% Salario</th>
                                `
                for (let i = 0; i < empleados.length; i++){
                    if (empleados[i].cargo == "Desarrollador de Software") {
                        pos = i;
                        html += ` <tr>
                                    <td>${empleados[pos].identificacion} </td>
                                    <td>${empleados[pos].nombre} </td>
                                    <td>${empleados[pos].apellido} </td>
                                    <td>${empleados[pos].cargo} </td>
                                    <td>${empleados[pos].salario} </td>
                                    <td>${(empleados[pos].salario)*0.10}
                                    </tr>
                            ` 
                    }
                            
                }
                html += `</table>`
                resolve(html)
            })
         }

        //ejecucion
        buscar()
        .then((tabla)=>{
                setTimeout(() => {
                    document.getElementById('message').innerHTML = tabla;
                }, 5000);
                document.getElementById('message').innerHTML = "Buscando usuario espere por favor..."
            })

            .catch((errormess)=>{
                setTimeout(() => {
                    document.getElementById('message').innerHTML = errormess;  
                }, 5000);

            })
    </script>
</body>
</html>